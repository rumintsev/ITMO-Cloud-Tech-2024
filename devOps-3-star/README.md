# Лабораторная работа 3 star
### Задача:

Сделать красиво работу с секретами. Например, поднять Hashicorp Vault (или другую секретохранилку) и сделать так, чтобы ci/cd пайплайн (или любой другой ваш сервис) ходил туда, брал секрет, использовал его не светя в логах. В Readme аргументировать почему ваш способ красивый, а также описать, почему хранение секретов в CI/CD переменных репозитория не является хорошей практикой.

### Ход работы:

Было решено для хранения секретов использовать **Bitwarden**. После регистрации и создания всего чего можно, в том числе пользователя, 
получаем токен доступа, который заносим в Git Hub secrets

![Снимок экрана 2024-12-22 004138](https://github.com/user-attachments/assets/efc93257-86d0-4e7b-b169-28d96c972139)

Далее подвязываем секреты к нам в файлик 
```yaml
- name: Bitwarden secrets
      uses: bitwarden/sm-action@v2
      with:
        access_token: ${{ secrets.BW_ACCESS_TOKEN }}
        base_url: https://vault.bitwarden.com
        secrets: |
          939dd97d-b140-45c1-b937-b24d01564536 > API_key
          461b0a65-a897-4b51-b731-b24d015687b8 > Password  
```
Набор цифр и букв соответсвуют каждому секрету, который мы добавили в Bitwarden

![Снимок экрана 2024-12-22 003422](https://github.com/user-attachments/assets/40c08c5a-ac09-4c88-a510-d8e52c65bd06)

А что если случайно вывести секреты?
```yaml
- name: All secret things come to light sometime
      run: |
          echo "${{ env.API_key }}"
          echo "${{ env.Password }}"
```
Ничего страшного

![Снимок экрана 2024-12-22 003455](https://github.com/user-attachments/assets/037ab014-29d7-4284-82bc-9e93f4430582)

## Почему хранение и использование секретов через Bitwarden - красивое решение:

### Централизованное управление

Все секреты хранятся в одном месте, что упрощает управление и контроль доступа.

### Высокая безопасность

Bitwarden использует шифрование End-to-End Encryption, что делает секреты недоступными даже для администраторов сервиса.

### Гибкость:

Секреты можно организовать по коллекциям или проектам, предоставляя доступ только тем, кому он действительно нужен.

## Почему хранение секретов в CI/CD переменных репозитория - плохая практика:

Кратко - из-за плюсов секретохранилок

### Контроль доступа

В репозиториях доступ к секретам чаще всего предоставляется всей команде, что может быть избыточным.

### Повышенный риск утечек:

Если кто-то получает доступ к репозиторию, все секреты становятся уязвимыми.

### Плохая масштабируемость:

Для большого количества проектов управление секретами через настройки репозиториев становится неприятным и сложным :(
